<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}MultiRental Storage{% endblock %}</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #F0F0F0;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh; /* Altura completa del viewport */
        }
    
        .navbar {
            background-color: #003366; /* Azul Oscuro */
            color: #ffffff;
            padding: 10px;
            z-index: 1000; /* Asegura que la navbar esté por encima de otros elementos */
        }
    
        .main-layout {
            display: flex;
            flex: 1; /* Ocupa todo el espacio disponible */
            min-height: 0;
        }
    
        .sidebar {
            background-color: #0057b8; /* Azul Claro */
            color: #ffffff;
            width: 220px; /* Ancho fijo del sidebar */
            flex-shrink: 0; /* Fija el ancho del sidebar */
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Alineación de los elementos */
            min-height: 100%; /* Altura completa */
        }
    
        .sidebar ul {
            padding: 0;
            list-style: none;
            margin: 0;
            flex-grow: 1;
        }
    
        .sidebar .nav-link {
            color: #ffffff;
            font-size: 1.1rem;
            padding: 10px 15px;
            text-decoration: none;
            transition: background-color 0.3s, color 0.3s;
        }
    
        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            background-color: #003366; /* Azul Oscuro */
            color: #ffffff;
        }
    
        .content {
            flex: 1; /* Ocupa el espacio restante */
            padding: 20px;
            overflow-y: auto; /* Agrega desplazamiento si el contenido es largo */
        }
    
        footer {
            background-color: #f8f9fa;
            padding: 1rem 0;
            text-align: center;
            color: #666;
        }
    </style>
    
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="sidebar-header" style="display: flex; align-items: center; gap: 10px; padding: 10px;">
            <!-- SVG logo -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000" width="50" height="50" preserveAspectRatio="xMidYMid meet">
                <g transform="translate(0,500) scale(0.1,-0.1)" fill="#FFFFFF" stroke="none">
                    <path d="M1120 2485 l0 -415 315 0 315 0 0 415 0 415 -315 0 -315 0 0 -415z
                    m600 0 l0 -385 -290 0 -290 0 0 385 0 385 290 0 290 0 0 -385z"/>
                    <path d="M1170 2755 l0 -75 260 0 260 0 0 75 0 75 -260 0 -260 0 0 -75z m275
                    45 c0 -7 -6 -15 -12 -17 -8 -3 -13 4 -13 17 0 13 5 20 13 18 6 -3 12 -11 12
                    -18z"/>
                    <path d="M1170 2575 l0 -75 130 0 130 0 0 75 0 75 -130 0 -130 0 0 -75z m145
                    45 c0 -7 -6 -15 -12 -17 -8 -3 -13 4 -13 17 0 13 5 20 13 18 6 -3 12 -11 12
                    -18z"/>
                    <path d="M1430 2390 l0 -80 130 0 130 0 0 80 0 80 -130 0 -130 0 0 -80z m148
                    48 c-6 -18 -28 -21 -28 -4 0 9 7 16 16 16 9 0 14 -5 12 -12z"/>
                    <path d="M1170 2210 l0 -80 260 0 260 0 0 80 0 80 -260 0 -260 0 0 -80z m278
                    48 c-6 -18 -28 -21 -28 -4 0 9 7 16 16 16 9 0 14 -5 12 -12z"/>
                    <path d="M1860 2661 l0 -161 25 0 25 0 1 108 c0 120 9 114 29 -20 13 -86 14
                    -88 41 -88 31 0 31 1 51 130 l13 85 3 -107 3 -108 29 0 30 0 0 160 0 160 -49
                    0 c-56 0 -55 2 -66 -113 -4 -37 -10 -65 -13 -62 -3 3 -11 42 -16 88 l-11 82
                    -47 3 -48 3 0 -160z"/>
                    <path d="M2132 2681 c3 -120 6 -142 22 -160 24 -27 76 -28 107 -2 22 18 24 26
                    27 160 l4 141 -31 0 -31 0 0 -114 c0 -122 -4 -146 -26 -146 -11 0 -14 26 -14
                    130 l0 130 -31 0 -31 0 4 -139z"/>
                    <path d="M2310 2660 l0 -160 65 0 c62 0 65 1 65 24 0 21 -6 25 -32 28 l-33 3
                    -3 133 -3 132 -29 0 -30 0 0 -160z"/>
                    <path d="M2450 2790 c0 -23 4 -30 20 -30 19 0 20 -7 20 -130 l0 -130 30 0 30
                    0 0 130 c0 123 1 130 20 130 16 0 20 7 20 30 l0 30 -70 0 -70 0 0 -30z"/>
                    <path d="M2600 2660 l0 -160 30 0 30 0 0 160 0 160 -30 0 -30 0 0 -160z"/>
                    <path d="M2690 2660 l0 -160 30 0 30 0 0 75 c0 43 4 75 10 75 6 0 10 -32 10
                    -75 l0 -75 30 0 c25 0 30 4 36 36 8 44 -1 117 -15 122 -7 2 -6 11 4 25 19 28
                    19 87 -1 115 -13 19 -24 22 -75 22 l-59 0 0 -160z m88 73 c-4 -39 -28 -42 -28
                    -4 0 21 5 31 16 31 11 0 14 -8 12 -27z"/>
                </g>
            </svg>
            <!-- Texto al lado del logo -->
            <span style="font-size: 24px; color: white;">MultiRental Storage</span>
        </div>
        
                    
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="navbar-nav ms-auto">
                    {% if session['nombre_usuario'] %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle user-name" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            {{ session['nombre_usuario'] }}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                            <li>
                                <!-- Logout Form -->
                                <form action="{{ url_for('main_bp.logout') }}" method="POST" style="margin: 0; padding: 0;">
                                    <button type="submit" class="dropdown-item">Cerrar sesión</button>
                                </form>
                            </li>
                        </ul>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <span class="navbar-text">Invitado</span>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Layout -->
    <div class="main-layout">
            <!-- Sidebar -->
            <div class="sidebar">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'main_bp.home' %}active{% endif %}" href="{{ url_for('main_bp.home') }}">
                            <i class="fas fa-tools"></i> Herramientas
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'main_bp.reportes' %}active{% endif %}" href="{{ url_for('main_bp.reportes') }}">
                            <i class="fas fa-chart-bar"></i> Reportes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'main_bp.registroHerramientas' %}active{% endif %}" href="{{ url_for('main_bp.registroHerramientas') }}">
                            <i class="fas fa-plus-circle"></i> Registro Herramienta
                        </a>
                    </li>
                    {% if session['usuario_id'] %}
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'main_bp.listar_sucursales' %}active{% endif %}" href="{{ url_for('main_bp.listar_sucursales') }}">
                            <i class="fas fa-store"></i> Listar Sucursales
                        </a>
                    </li>
                    {% endif %}

                    {% if session['rol'] == 'Administrador' %}
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'main_bp.crear_usuario' %}active{% endif %}" href="{{ url_for('main_bp.crear_usuario') }}">
                            <i class="fas fa-user-plus"></i> Crear Usuario
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'main_bp.crear_sucursal' %}active{% endif %}" href="{{ url_for('main_bp.crear_sucursal') }}">
                            <i class="fas fa-plus-square"></i> Crear Sucursal
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'main_bp.listar_usuarios' %}active{% endif %}" href="{{ url_for('main_bp.listar_usuarios') }}">
                            <i class="fas fa-users"></i> Listar Usuarios
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'main_bp.eliminar_herramienta' %}active{% endif %}" href="{{ url_for('main_bp.listar_herramientas_para_eliminar') }}">
                            <i class="fas fa-trash-alt"></i> Eliminar Herramienta
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'main_bp.eliminar_usuario' %}active{% endif %}"
                            href="{{ url_for('main_bp.listar_para_eliminar_usuarios') }}">
                            <i class="fas fa-user-minus"></i> Eliminar Usuario
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>

            <!-- Content -->
            <div class="col-md-9 col-lg-10 content">
                <div class="container mt-4">
                    {% if request.endpoint == 'main_bp.home' %}
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h2 class="card-title">Bienvenido a MultiRental Storage</h2>
                        </div>
                    </div>
                    {% endif %}

                    <div class="card mt-4 shadow-sm">
                        <div class="card-body">
                            <!-- Mostrar mensajes flash -->
                            {% with messages = get_flashed_messages(with_categories=true) %}
                            {% if messages %}
                            <div class="flash-message">
                                {% for category, message in messages %}
                                <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                                    {{ message }}
                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                </div>
                                {% endfor %}
                            </div>
                            {% endif %}
                            {% endwith %}

                            {% block content %}{% endblock %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Ocultar automáticamente los mensajes flash después de 5 segundos
        setTimeout(() => {
            const flashMessages = document.querySelectorAll('.flash-message .alert');
            flashMessages.forEach((message) => {
                const fadeEffect = setInterval(() => {
                    if (!message.style.opacity) {
                        message.style.opacity = 1;
                    }
                    if (message.style.opacity > 0) {
                        message.style.opacity -= 0.1;
                    } else {
                        clearInterval(fadeEffect);
                        message.remove();
                    }
                }, 50);
            });
        }, 5000);
    </script>
    
</body>

</html>
